<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mac â†” Windows Universal Converter</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="brand">
          <h1>Mac â†” Windows Universal Converter</h1>
          <p class="subtitle">Automated cross-platform conversion with real-time AI orchestration</p>
        </div>
        <div class="status-indicators">
          <span id="backend-status" class="status-pill status-pill--unknown">Backend: â€¦</span>
          <span id="resource-status" class="status-pill">Resources: n/a</span>
          <span id="session-offline-indicator" class="status-pill status-pill--muted">Mode: n/a</span>
        </div>
      </header>

      <nav class="tab-bar">
        <button class="tab-button active" data-tab="dashboard">Dashboard</button>
        <button class="tab-button" data-tab="settings">Settings</button>
        <button class="tab-button" data-tab="batch">Batch</button>
        <button class="tab-button" data-tab="community">Community</button>
      </nav>

      <main class="tab-container">
        <section id="tab-dashboard" class="tab-content active">
          <div class="grid grid--dashboard">
            <section class="panel panel--wide">
              <div class="panel-header">
                <h2>Project Setup</h2>
                <div class="direction-buttons">
                  <button id="btn-mac-to-win" class="direction-button" data-direction="mac-to-win">Mac â†’ Windows</button>
                  <button id="btn-win-to-mac" class="direction-button" data-direction="win-to-mac">Windows â†’ Mac</button>
                </div>
              </div>
              <div class="setup-grid">
                <div class="dropzone-wrapper">
                  <div id="dropzone" class="dropzone">
                    <p>Drag &amp; drop your project folder<br /><span class="muted">(or click to browse)</span></p>
                    <input type="file" id="folder-input" webkitdirectory directory multiple hidden />
                  </div>
                  <p id="selected-path" class="selected-path">No project selected</p>
                  <div class="setup-actions">
                    <button id="btn-rescan" class="secondary-button" disabled>Rescan Project</button>
                    <button id="btn-preview" class="secondary-button" disabled>Preview Conversion</button>
                    <button id="btn-start" class="primary-button" disabled>Start Conversion</button>
                    <button id="btn-resume-failed" class="secondary-button" disabled>Resume Failed</button>
                  </div>
                </div>
                <div class="setup-config">
                  <div class="form-group">
                    <label for="model-provider">Model Provider</label>
                    <select id="model-provider"></select>
                  </div>
                  <div class="form-group">
                    <label for="model-identifier">Model / Path / Endpoint</label>
                    <input id="model-identifier" type="text" placeholder="ollama::llama3, gpt-5, gemini-pro, ..." />
                  </div>
                  <div class="form-group">
                    <label for="api-key">API Key (if required)</label>
                    <input id="api-key" type="password" placeholder="Enter API key" />
                  </div>
                  <div class="form-group">
                    <label for="target-framework">Target Framework</label>
                    <select id="target-framework"></select>
                  </div>
                  <div class="form-group">
                    <label for="language-output">Language Output</label>
                    <select id="language-output">
                      <option value="auto">Auto (recommended)</option>
                      <option value="swift">Swift</option>
                      <option value="csharp">C#</option>
                      <option value="cpp">C++ (preserve)</option>
                    </select>
                  </div>
                  <div class="toggle-row">
                    <label><input type="checkbox" id="debug-toggle" /> Enable Debug Mode</label>
                    <button id="btn-view-logs" class="secondary-button secondary-button--icon">View Logs</button>
                  </div>
                  <div class="progress-controls">
                    <button id="btn-pause" class="secondary-button" disabled>Pause</button>
                    <button id="btn-resume" class="secondary-button" disabled>Resume</button>
                  </div>
                </div>
              </div>
              <div id="preview-summary" class="preview-summary hidden">
                <h3>Preview Summary</h3>
                <div class="preview-cards" id="preview-cards"></div>
              </div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Auto-Detection</h2>
                <span id="detection-summary" class="summary-pill">Idle</span>
              </div>
              <div id="detection-results" class="detection-results">
                <div class="placeholder">Project analysis will appear here after scanning.</div>
              </div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Session Overview</h2>
                <span id="quality-score-pill" class="summary-pill">â€“</span>
              </div>
              <div id="progress-summary" class="progress-summary">
                <div id="progress-stats" class="progress-stats"></div>
                <div id="progress-time" class="progress-time"></div>
              </div>
              <div id="progress-log" class="progress-log">
                <div class="placeholder">Conversion progress will stream here.</div>
              </div>
              <div id="stage-progress" class="stage-progress"></div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Manual Fix Queue</h2>
                <div class="manual-actions">
                  <span id="manual-fix-count" class="summary-pill summary-pill--muted">0 pending</span>
                  <button id="btn-apply-learned" class="secondary-button" disabled>Apply Learned Patterns</button>
                </div>
              </div>
              <div class="manual-fix-layout">
                <div id="manual-fix-list" class="manual-fix-list">
                  <div class="placeholder">No manual fixes pending ðŸŽ‰</div>
                </div>
                <div class="manual-fix-editor">
                  <div class="form-group">
                    <label for="manual-fix-note">Notes</label>
                    <textarea id="manual-fix-note" rows="2" placeholder="Why are you adjusting this chunk?"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="manual-fix-code">Override Code</label>
                    <textarea id="manual-fix-code" rows="12" spellcheck="false"></textarea>
                  </div>
                <div class="fix-actions">
                  <input id="manual-fix-author" type="text" placeholder="Your name (optional)" />
                  <button id="btn-apply-fix" class="primary-button" disabled>Apply Manual Fix</button>
                  <button id="btn-skip-fix" class="secondary-button secondary-button--danger" disabled>Skip</button>
                </div>
                </div>
              </div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Vulnerabilities &amp; License Alerts</h2>
                <span id="vulnerability-count" class="summary-pill summary-pill--muted">n/a</span>
              </div>
              <div id="vulnerability-list" class="vulnerability-list">
                <div class="placeholder">Run a conversion to see vulnerability audits.</div>
              </div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Cost &amp; Budget</h2>
                <span id="cost-budget-pill" class="summary-pill summary-pill--muted">Budget idle</span>
              </div>
              <div id="cost-summary" class="cost-summary">
                <div class="placeholder">Start a conversion to track spend.</div>
              </div>
            </section>

            <section class="panel">
              <div class="panel-header">
                <h2>Build Console</h2>
                <button id="btn-refresh-logs" class="secondary-button secondary-button--icon">Refresh</button>
              </div>
              <pre id="build-console" class="build-console"><code class="console-content muted">Build output will stream here when tests or validations run.</code></pre>
            </section>
          </div>
        </section>

        <section id="tab-settings" class="tab-content">
          <div class="settings-sections">
            <section class="panel">
              <h2>Conversion Preferences</h2>
              <div class="settings-grid">
                <div class="form-group">
                  <label for="code-style">Code Style</label>
                  <select id="code-style">
                    <option value="native">Native</option>
                    <option value="microsoft">Microsoft</option>
                    <option value="google">Google</option>
                    <option value="custom">Custom</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="comment-style">Comments</label>
                  <select id="comment-style">
                    <option value="keep">Keep</option>
                    <option value="summarize">Summarize</option>
                    <option value="minimal">Minimal</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="naming-style">Naming</label>
                  <select id="naming-style">
                    <option value="preserve">Preserve</option>
                    <option value="adapt">Adapt</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="error-style">Error Handling</label>
                  <select id="error-style">
                    <option value="adapt">Adapt</option>
                    <option value="throw">Throw</option>
                    <option value="result">Result Types</option>
                  </select>
                </div>
              </div>
              <div class="settings-grid">
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="cleanup-unused" /> Cleanup unused assets automatically</label>
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="cleanup-autodelete" /> Auto-delete unused assets (over threshold)</label>
                </div>
                <div class="form-group">
                  <label for="cleanup-min-bytes">Cleanup Threshold (KB)</label>
                  <input id="cleanup-min-bytes" type="number" min="0" step="256" value="1024" />
                </div>
                <div class="form-group">
                  <label for="quality-threshold">Quality Score Threshold</label>
                  <input id="quality-threshold" type="number" min="0" max="1" step="0.05" value="0.7" />
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="enable-learning" checked /> Learn from manual fixes</label>
                </div>
                <div class="form-group">
                  <label for="learning-trigger">Auto-learn after N fixes</label>
                  <input id="learning-trigger" type="number" min="1" max="10" value="3" />
                </div>
              </div>
            </section>

            <section class="panel">
              <h2>Performance &amp; AI Strategy</h2>
              <div class="settings-grid">
                <div class="form-group">
                  <label for="max-cpu">Max CPU (%)</label>
                  <input id="max-cpu" type="number" min="40" max="100" value="80" />
                </div>
                <div class="form-group">
                  <label for="max-ram">Max RAM (GB)</label>
                  <input id="max-ram" type="number" min="2" max="64" value="16" />
                </div>
                <div class="form-group">
                  <label for="threads">Threads</label>
                  <input id="threads" type="number" min="1" max="16" value="4" />
                </div>
                <div class="form-group">
                  <label for="api-rate">API Rate Limit</label>
                  <input id="api-rate" type="number" min="5" max="120" value="30" />
                </div>
                <div class="form-group">
                  <label for="parallel-conversions">Parallel Conversions</label>
                  <input id="parallel-conversions" type="number" min="1" max="4" value="1" />
                </div>
                <div class="form-group">
                  <label for="build-timeout">Build Timeout (sec)</label>
                  <input id="build-timeout" type="number" min="60" max="3600" value="600" />
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="prefer-offline" /> Prefer offline tooling when available</label>
                </div>
              </div>
              <div class="settings-grid">
                <div class="form-group">
                  <label for="ai-temp">AI Temperature</label>
                  <input id="ai-temp" type="number" step="0.1" min="0" max="1" value="0.2" />
                </div>
                <div class="form-group">
                  <label for="ai-strategy">Model Strategy</label>
                  <select id="ai-strategy">
                    <option value="balanced">Balanced</option>
                    <option value="cost">Cost</option>
                    <option value="speed">Speed</option>
                    <option value="quality">Quality</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="ai-retries">Retries</label>
                  <input id="ai-retries" type="number" min="1" max="5" value="3" />
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="ai-offline" /> Force offline models only</label>
                </div>
                <div class="form-group">
                  <label for="ai-prompt-tone">Prompt Tone</label>
                  <select id="ai-prompt-tone">
                    <option value="pro">Professional</option>
                    <option value="casual">Casual</option>
                    <option value="detailed">Detailed</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="ai-fallback-model">Fallback Model</label>
                  <input id="ai-fallback-model" type="text" placeholder="gpt-5-mini" />
                </div>
                <div class="form-group">
                  <label for="ai-fallback-provider">Fallback Provider</label>
                  <input id="ai-fallback-provider" type="text" placeholder="ollama" />
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="ai-smart-prompts" checked /> Enable SMART prompt enrichments</label>
                </div>
              </div>
            </section>

            <section class="panel">
              <h2>Cost Guardrails</h2>
              <div class="settings-grid">
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="cost-enabled" checked /> Enforce budget limit</label>
                </div>
                <div class="form-group">
                  <label for="cost-max">Max Budget (USD)</label>
                  <input id="cost-max" type="number" min="0" step="5" value="50" />
                </div>
                <div class="form-group">
                  <label for="cost-warn">Warn At %</label>
                  <input id="cost-warn" type="number" min="10" max="100" step="5" value="80" />
                </div>
                <div class="form-group form-group--checkbox">
                  <label><input type="checkbox" id="cost-auto-switch" checked /> Auto-switch when approaching limit</label>
                </div>
                <div class="form-group">
                  <label for="cost-fallback-model">Budget Fallback Model</label>
                  <input id="cost-fallback-model" type="text" placeholder="gpt-5-nano" />
                </div>
                <div class="form-group">
                  <label for="cost-fallback-provider">Budget Fallback Provider</label>
                  <input id="cost-fallback-provider" type="text" placeholder="ollama" />
                </div>
              </div>
            </section>

            <section class="panel">
              <h2>Webhooks</h2>
              <p class="hint-text">Notify your CI/CD pipelines or chat tools when conversions start, complete, or fail.</p>
              <div id="webhook-rows" class="webhook-rows"></div>
              <div class="webhook-actions">
                <button id="btn-add-webhook" class="secondary-button secondary-button--icon">Add Webhook</button>
                <button id="btn-test-webhooks" class="secondary-button">Send Test Event</button>
              </div>
              <div id="webhook-feedback" class="webhook-feedback muted" role="status"></div>
            </section>

            <section class="panel">
              <h2>Templates</h2>
              <div class="template-actions">
                <input id="template-name" type="text" placeholder="Template name" />
                <button id="btn-save-template" class="secondary-button">Save Template</button>
                <button id="btn-load-template" class="secondary-button">Load</button>
                <button id="btn-import-template" class="secondary-button">Import</button>
                <button id="btn-export-template" class="secondary-button">Export</button>
              </div>
              <div class="settings-grid">
                <div class="form-group">
                  <label for="template-description">Description</label>
                  <input id="template-description" type="text" placeholder="What does this template optimize for?" />
                </div>
                <div class="form-group">
                  <label for="template-owner">Owner</label>
                  <input id="template-owner" type="text" placeholder="team, community, personal" />
                </div>
                <div class="form-group">
                  <label for="template-tags">Tags</label>
                  <input id="template-tags" type="text" placeholder="game, desktop, data" />
                </div>
                <div class="form-group align-end">
                  <button id="btn-share-template" class="secondary-button">Share Template</button>
                </div>
              </div>
              <div id="template-list" class="template-list">
                <div class="placeholder">No templates saved yet.</div>
              </div>
            </section>

            <section class="panel">
              <h2>Backup &amp; Recovery</h2>
              <div class="form-group form-group--checkbox">
                <label><input type="checkbox" id="backup-enabled" /> Enable Cloud Backup</label>
              </div>
              <div class="form-group">
                <label for="backup-provider">Provider</label>
                <select id="backup-provider"></select>
              </div>
              <div class="form-group">
                <label for="backup-credential">Credential</label>
                <div class="input-with-actions">
                  <select id="backup-credential"></select>
                  <button id="btn-backup-connect" class="secondary-button">Connect</button>
                  <button id="btn-backup-refresh" class="secondary-button">Refresh</button>
                </div>
              </div>
              <div class="form-group">
                <label for="backup-remote-path">Remote Path Template</label>
                <input id="backup-remote-path" type="text" placeholder="{project}/{direction}" />
              </div>
              <div class="form-group">
                <label for="backup-retention">Retention (copies)</label>
                <input id="backup-retention" type="number" min="1" max="50" value="10" />
              </div>
              <div class="settings-grid settings-grid--backup">
                <div class="form-group">
                  <label for="backup-credential-label">Credential Label</label>
                  <input id="backup-credential-label" type="text" placeholder="Workspace name" />
                </div>
                <div class="form-group">
                  <label for="backup-client-id">Client ID</label>
                  <input id="backup-client-id" type="text" placeholder="OAuth client id" />
                </div>
                <div class="form-group">
                  <label for="backup-client-secret">Client Secret</label>
                  <input id="backup-client-secret" type="password" placeholder="OAuth client secret" />
                </div>
                <div class="form-group">
                  <label for="backup-scopes">Scopes (comma separated)</label>
                  <input id="backup-scopes" type="text" placeholder="Leave blank for defaults" />
                </div>
                <div class="form-group">
                  <label for="backup-root-folder">Root Folder</label>
                  <input id="backup-root-folder" type="text" placeholder="MacWinConverter Backups" />
                </div>
                <div class="form-group">
                  <label for="backup-tenant">Tenant (OneDrive)</label>
                  <input id="backup-tenant" type="text" placeholder="common" />
                </div>
                <div class="form-group">
                  <label for="backup-local-path">Local Backup Directory</label>
                  <div class="input-with-actions">
                    <input id="backup-local-path" type="text" placeholder="/path/to/backups" />
                    <button id="btn-backup-save-local" class="secondary-button">Save Path</button>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </section>

        <section id="tab-batch" class="tab-content">
          <section class="panel panel--wide">
            <div class="panel-header">
              <h2>Batch Conversion Queue</h2>
              <span id="batch-status" class="summary-pill summary-pill--muted">Idle</span>
            </div>
            <div class="batch-form">
              <input id="batch-project-path" type="text" placeholder="Source project path" />
              <input id="batch-target-path" type="text" placeholder="Target output path" />
              <select id="batch-direction">
                <option value="mac-to-win">Mac â†’ Windows</option>
                <option value="win-to-mac">Windows â†’ Mac</option>
              </select>
              <button id="btn-batch-add" class="secondary-button">Add to Queue</button>
              <button id="btn-batch-clear" class="secondary-button secondary-button--danger">Clear Queue</button>
            </div>
            <div id="batch-queue" class="batch-queue">
              <div class="placeholder">Queue is empty. Add multiple projects to convert them sequentially.</div>
            </div>
            <div class="batch-actions">
              <button id="btn-batch-start" class="primary-button" disabled>Run Batch Conversion</button>
            </div>
          </section>
        </section>

        <section id="tab-community" class="tab-content">
          <div class="community-grid">
            <section class="panel">
              <div class="panel-header">
                <h2>Community Metrics</h2>
                <button id="btn-refresh-community" class="secondary-button secondary-button--icon">Refresh</button>
              </div>
              <div id="community-metrics" class="community-metrics">
                <div class="placeholder">Refresh to see anonymized success stats.</div>
              </div>
            </section>
            <section class="panel">
              <h2>Leaderboard</h2>
              <div id="community-leaderboard" class="leaderboard">
                <div class="placeholder">No leaderboard data yet.</div>
              </div>
            </section>
            <section class="panel">
              <h2>Report Issue</h2>
              <div class="community-report">
                <input id="issue-session-id" type="text" placeholder="Session ID (optional)" />
                <input id="issue-email" type="email" placeholder="Contact email (optional)" />
                <textarea id="issue-description" rows="5" placeholder="What happened? Include steps and expectations."></textarea>
                <label class="form-group--checkbox"><input type="checkbox" id="issue-include-logs" /> Include recent logs and summary (review locally)</label>
                <button id="btn-submit-issue" class="primary-button">Submit Report</button>
                <div id="issue-response" class="issue-response"></div>
              </div>
            </section>
          </div>
        </section>
      </main>
    </div>
    <script src="renderer.js" type="module"></script>
    <div id="loading-overlay" class="loading-overlay hidden" role="status" aria-live="polite">
      <div class="spinner" aria-hidden="true"></div>
      <div class="spinner-label">Workingâ€¦</div>
    </div>
  </body>
</html>
